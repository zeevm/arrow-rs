<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Parquet definition and repetition levels"><title>parquet::arrow::arrow_writer::levels - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../../static.files/rustdoc-198729e5.css"><meta name="rustdoc-vars" data-root-path="../../../../" data-static-root-path="../../../../static.files/" data-current-crate="parquet" data-themes="" data-resource-suffix="" data-rustdoc-version="1.84.0-nightly (3f1be1ec7 2024-10-28)" data-channel="nightly" data-search-js="search-c5a66128.js" data-settings-js="settings-0f613d39.js" ><script src="../../../../static.files/storage-59e33391.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../../../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../../../../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../../parquet/index.html">parquet</a><span class="version">53.2.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module levels</a></h2><h3><a href="#structs">Module Items</a></h3><ul class="block"><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#functions" title="Functions">Functions</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="../index.html">In parquet::<wbr>arrow::<wbr>arrow_<wbr>writer</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="../../../index.html">parquet</a>::<wbr><a href="../../index.html">arrow</a>::<wbr><a href="../index.html">arrow_writer</a></span><h1>Module <span>levels</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../../src/parquet/arrow/arrow_writer/levels.rs.html#18-1865">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Parquet definition and repetition levels</p>
<p>Contains the algorithm for computing definition and repetition levels.
The algorithm works by tracking the slots of an array that should
ultimately be populated when writing to Parquet.
Parquet achieves nesting through definition levels and repetition levels [1].
Definition levels specify how many optional fields in the part for the column
are defined.
Repetition levels specify at what repeated field (list) in the path a column
is defined.</p>
<p>In a nested data structure such as <code>a.b.c</code>, one can see levels as defining
whether a record is defined at <code>a</code>, <code>a.b</code>, or <code>a.b.c</code>.
Optional fields are nullable fields, thus if all 3 fields
are nullable, the maximum definition could be = 3 if there are no lists.</p>
<p>The algorithm in this module computes the necessary information to enable
the writer to keep track of which columns are at which levels, and to extract
the correct values at the correct slots from Arrow arrays.</p>
<p>It works by walking a record batchâ€™s arrays, keeping track of what values
are non-null, their positions and computing what their levels are.</p>
<p>[1] <a href="https://github.com/apache/parquet-format#nested-encoding">parquet-format#nested-encoding</a></p>
</div></details><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">Â§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.ArrayLevels.html" title="struct parquet::arrow::arrow_writer::levels::ArrayLevels">Array<wbr>Levels</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">The data necessary to write a primitive Arrow array to parquet, taking into account
any non-primitive parents it may have in the arrow representation</div></li><li><div class="item-name"><a class="struct" href="struct.LevelContext.html" title="struct parquet::arrow::arrow_writer::levels::LevelContext">Level<wbr>Context</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">The definition and repetition level of an array within a potentially nested hierarchy</div></li></ul><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">Â§</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.LevelInfoBuilder.html" title="enum parquet::arrow::arrow_writer::levels::LevelInfoBuilder">Level<wbr>Info<wbr>Builder</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">A helper to construct <a href="struct.ArrayLevels.html" title="struct parquet::arrow::arrow_writer::levels::ArrayLevels"><code>ArrayLevels</code></a> from a potentially nested [<code>Field</code>]</div></li></ul><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">Â§</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.calculate_array_levels.html" title="fn parquet::arrow::arrow_writer::levels::calculate_array_levels">calculate_<wbr>array_<wbr>levels</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">Performs a depth-first scan of the children of <code>array</code>, constructing <a href="struct.ArrayLevels.html" title="struct parquet::arrow::arrow_writer::levels::ArrayLevels"><code>ArrayLevels</code></a>
for each leaf column encountered</div></li><li><div class="item-name"><a class="fn" href="fn.is_leaf.html" title="fn parquet::arrow::arrow_writer::levels::is_leaf">is_leaf</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">Returns true if the DataType can be represented as a primitive parquet column,
i.e. a leaf array with no children</div></li></ul></section></div></main></body></html>