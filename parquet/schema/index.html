<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Parquet schema definitions and methods to print and parse schema."><title>parquet::schema - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-198729e5.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="parquet" data-themes="" data-resource-suffix="" data-rustdoc-version="1.84.0-nightly (3f1be1ec7 2024-10-28)" data-channel="nightly" data-search-js="search-c5a66128.js" data-settings-js="settings-0f613d39.js" ><script src="../../static.files/storage-59e33391.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../parquet/index.html">parquet</a><span class="version">53.2.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module schema</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#example" title="Example">Example</a></li></ul><h3><a href="#modules">Module Items</a></h3><ul class="block"><li><a href="#modules" title="Modules">Modules</a></li></ul></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="../index.html">In crate parquet</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="../index.html">parquet</a></span><h1>Module <span>schema</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/parquet/schema/mod.rs.html#18-81">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Parquet schema definitions and methods to print and parse schema.</p>
<ul>
<li><a href="types/struct.SchemaDescriptor.html" title="struct parquet::schema::types::SchemaDescriptor"><code>SchemaDescriptor</code></a> describes the data types of the columns stored in a file</li>
<li><a href="types/struct.ColumnDescriptor.html" title="struct parquet::schema::types::ColumnDescriptor"><code>ColumnDescriptor</code></a>: Describes the schema of a single (leaf) column.</li>
<li><a href="types/struct.ColumnPath.html" title="struct parquet::schema::types::ColumnPath"><code>ColumnPath</code></a>: Represents the location of a column in the schema (e.g. a nested field)</li>
</ul>
<p>Parquet distinguishes
between “logical” and “physical” data types.
For instance, strings (logical type) are stored as byte arrays (physical type).
Likewise, temporal types like dates, times, timestamps, etc. (logical type)
are stored as integers (physical type).</p>
<h2 id="example"><a class="doc-anchor" href="#example">§</a>Example</h2>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>parquet::{
    basic::{ConvertedType, Repetition, Type <span class="kw">as </span>PhysicalType},
    schema::{parser, printer, types::Type},
};
<span class="kw">use </span>std::sync::Arc;

<span class="comment">// Create the following schema:
//
// message schema {
//   OPTIONAL BYTE_ARRAY a (UTF8);
//   REQUIRED INT32 b;
// }

</span><span class="kw">let </span>field_a = Type::primitive_type_builder(<span class="string">"a"</span>, PhysicalType::BYTE_ARRAY)
    .with_converted_type(ConvertedType::UTF8)
    .with_repetition(Repetition::OPTIONAL)
    .build()
    .unwrap();

<span class="kw">let </span>field_b = Type::primitive_type_builder(<span class="string">"b"</span>, PhysicalType::INT32)
    .with_repetition(Repetition::REQUIRED)
    .build()
    .unwrap();

<span class="kw">let </span>schema = Type::group_type_builder(<span class="string">"schema"</span>)
    .with_fields(<span class="macro">vec!</span>[Arc::new(field_a), Arc::new(field_b)])
    .build()
    .unwrap();

<span class="kw">let </span><span class="kw-2">mut </span>buf = Vec::new();

<span class="comment">// Print schema into buffer
</span>printer::print_schema(<span class="kw-2">&amp;mut </span>buf, <span class="kw-2">&amp;</span>schema);

<span class="comment">// Parse schema from the string
</span><span class="kw">let </span>string_schema = String::from_utf8(buf).unwrap();
<span class="kw">let </span>parsed_schema = parser::parse_message_type(<span class="kw-2">&amp;</span>string_schema).unwrap();

<span class="macro">assert_eq!</span>(schema, parsed_schema);</code></pre></div>
</div></details><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="parser/index.html" title="mod parquet::schema::parser">parser</a></div><div class="desc docblock-short">Parquet schema parser.
Provides methods to parse and validate string message type into Parquet
<a href="types/enum.Type.html" title="enum parquet::schema::types::Type"><code>Type</code></a>.</div></li><li><div class="item-name"><a class="mod" href="printer/index.html" title="mod parquet::schema::printer">printer</a></div><div class="desc docblock-short">Parquet schema printer.
Provides methods to print Parquet file schema and list file metadata.</div></li><li><div class="item-name"><a class="mod" href="types/index.html" title="mod parquet::schema::types">types</a></div><div class="desc docblock-short">Contains structs and methods to build Parquet schema and schema descriptors.</div></li><li><div class="item-name"><a class="mod" href="visitor/index.html" title="mod parquet::schema::visitor">visitor</a></div><div class="desc docblock-short">Utilities to traverse against various parquet type.</div></li></ul></section></div></main></body></html>